<?php

Template::load('header');
Template::load('acp_nav');

$openCPU = new OpenCPU(Config::get('alternative_opencpu_instance'));

$nocache = "";

echo "<h2>OpenCPU test</h2>";
echo '<h5>testing ' . Config::get('alternative_opencpu_instance') . '</h5>';

$source = '{

library(knitr)
knit2html(text = "' . addslashes("__Hello__ World `r 1`
```{r}
# " . $nocache . "
library(ggplot2)  
qplot(rnorm(1000))
qplot(rnorm(10000), rnorm(10000))
library(formr)
'blabla' %contains% 'bla'
```
") . '",
fragment.only = T, options=c("base64_images","smartypants")
)
}';

$before = microtime(true);
$results = $openCPU->identity(array('x' => $source), '', true);

$alert_type = 'alert-success';
if ($openCPU->http_status > 302 OR $openCPU->http_status === 0) {
    $alert_type = 'alert-danger';
}

alert("1. HTTP status: " . $openCPU->http_status, $alert_type);

$accordion = $openCPU->debugCall($results);

alert("1. Request took " . round((microtime(true) - $before) / 60, 4) . " minutes", 'alert-info');

// ===============================================

$openCPU = new OpenCPU(Config::get('alternative_opencpu_instance'));
$source = '{
library(formr)
# ".$nocache."
rnorm(10)
}';
$before = microtime(true);
$results = $openCPU->identity(array('x' => $source), '', true);

$alert_type = 'alert-success';
if ($openCPU->http_status > 302 OR $openCPU->http_status === 0) {
    $alert_type = 'alert-danger';
}

alert("2. HTTP status: " . $openCPU->http_status, $alert_type);
$accordion2 = $openCPU->debugCall($results);
alert("2. Request took " . round((microtime(true) - $before) / 60, 4) . " minutes", 'alert-info');

// ===============================================

$openCPU = new OpenCPU(Config::get('alternative_opencpu_instance'));
$source = '{ 
(function() {
# ' . $nocache . '
survey_unit_sessions = as.data.frame(jsonlite::fromJSON("{\"session\":[\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\"],\"id\":[1420,1422,1423,1427,1428,1432,1433,1434,1435,1436,1437,1439,1440,1442,1443,1445,1446,1465,1466,1468,1469,1470,1479,1480,1481,1483,1484,1485,1486,1494,1495,1496,1497,1539,1540,1541,1542,1543,1544,1545,1547,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1591,1592,1596,1597,1598,1599,1600,1601,1602,1603,1604,1766,1916,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932],\"unit_id\":[224,224,225,224,225,224,225,225,221,222,223,224,225,222,223,224,225,221,222,224,221,222,221,222,223,224,221,222,223,224,221,222,223,225,225,225,224,221,222,223,224,224,221,222,224,221,222,221,222,221,222,221,222,221,221,224,220,224,221,222,227,229,228,227,229,228,227,229,221,222,223,219,224,221,222,223,219,224,220,220,226],\"run_session_id\":[472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472],\"created\":[\"2011-01-04 19:40:45\",\"2011-01-04 19:43:16\",\"2011-01-04 19:43:17\",\"2011-01-04 19:46:26\",\"2011-01-04 19:46:28\",\"2011-01-04 19:59:45\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:26\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:51\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:05\",\"2011-01-04 20:04:06\",\"2011-01-04 21:08:32\",\"2011-01-04 21:08:32\",\"2011-01-04 21:11:11\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:29:13\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:30:56\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-05 14:00:17\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:31:26\",\"2011-01-05 18:16:15\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:48:57\",\"2011-01-05 18:49:00\",\"2011-01-05 19:34:52\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\"],\"ended\":[\"2011-01-04 19:41:36\",\"2011-01-04 19:43:16\",\"2011-01-04 19:44:30\",\"2011-01-04 19:46:28\",\"2011-01-04 19:56:57\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:37\",\"2011-01-04 20:02:58\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:06\",\"2011-01-04 20:58:29\",\"2011-01-04 21:08:32\",\"2011-01-04 21:09:10\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:24:17\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:27:46\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:29:18\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-04 21:31:02\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:26:21\",\"2011-01-05 17:38:17\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:47:09\",\"2011-01-05 18:49:00\",\"2011-01-05 19:33:50\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\",\"2011-01-09 19:47:22\",null]}"), stringsAsFactors=F)

survey_unit_sessions = as.data.frame(jsonlite::fromJSON("{\"session\":[\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\"],\"id\":[1420,1422,1423,1427,1428,1432,1433,1434,1435,1436,1437,1439,1440,1442,1443,1445,1446,1465,1466,1468,1469,1470,1479,1480,1481,1483,1484,1485,1486,1494,1495,1496,1497,1539,1540,1541,1542,1543,1544,1545,1547,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1591,1592,1596,1597,1598,1599,1600,1601,1602,1603,1604,1766,1916,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932],\"unit_id\":[224,224,225,224,225,224,225,225,221,222,223,224,225,222,223,224,225,221,222,224,221,222,221,222,223,224,221,222,223,224,221,222,223,225,225,225,224,221,222,223,224,224,221,222,224,221,222,221,222,221,222,221,222,221,221,224,220,224,221,222,227,229,228,227,229,228,227,229,221,222,223,219,224,221,222,223,219,224,220,220,226],\"run_session_id\":[472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472],\"created\":[\"2011-01-04 19:40:45\",\"2011-01-04 19:43:16\",\"2011-01-04 19:43:17\",\"2011-01-04 19:46:26\",\"2011-01-04 19:46:28\",\"2011-01-04 19:59:45\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:26\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:51\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:05\",\"2011-01-04 20:04:06\",\"2011-01-04 21:08:32\",\"2011-01-04 21:08:32\",\"2011-01-04 21:11:11\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:29:13\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:30:56\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-05 14:00:17\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:31:26\",\"2011-01-05 18:16:15\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:48:57\",\"2011-01-05 18:49:00\",\"2011-01-05 19:34:52\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\"],\"ended\":[\"2011-01-04 19:41:36\",\"2011-01-04 19:43:16\",\"2011-01-04 19:44:30\",\"2011-01-04 19:46:28\",\"2011-01-04 19:56:57\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:37\",\"2011-01-04 20:02:58\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:06\",\"2011-01-04 20:58:29\",\"2011-01-04 21:08:32\",\"2011-01-04 21:09:10\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:24:17\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:27:46\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:29:18\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-04 21:31:02\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:26:21\",\"2011-01-05 17:38:17\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:47:09\",\"2011-01-05 18:49:00\",\"2011-01-05 19:33:50\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\",\"2011-01-09 19:47:22\",null]}"), stringsAsFactors=F)

survey_unit_sessions = as.data.frame(jsonlite::fromJSON("{\"session\":[\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\"],\"id\":[1420,1422,1423,1427,1428,1432,1433,1434,1435,1436,1437,1439,1440,1442,1443,1445,1446,1465,1466,1468,1469,1470,1479,1480,1481,1483,1484,1485,1486,1494,1495,1496,1497,1539,1540,1541,1542,1543,1544,1545,1547,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1591,1592,1596,1597,1598,1599,1600,1601,1602,1603,1604,1766,1916,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932],\"unit_id\":[224,224,225,224,225,224,225,225,221,222,223,224,225,222,223,224,225,221,222,224,221,222,221,222,223,224,221,222,223,224,221,222,223,225,225,225,224,221,222,223,224,224,221,222,224,221,222,221,222,221,222,221,222,221,221,224,220,224,221,222,227,229,228,227,229,228,227,229,221,222,223,219,224,221,222,223,219,224,220,220,226],\"run_session_id\":[472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472],\"created\":[\"2011-01-04 19:40:45\",\"2011-01-04 19:43:16\",\"2011-01-04 19:43:17\",\"2011-01-04 19:46:26\",\"2011-01-04 19:46:28\",\"2011-01-04 19:59:45\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:26\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:51\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:05\",\"2011-01-04 20:04:06\",\"2011-01-04 21:08:32\",\"2011-01-04 21:08:32\",\"2011-01-04 21:11:11\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:29:13\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:30:56\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-05 14:00:17\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:31:26\",\"2011-01-05 18:16:15\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:48:57\",\"2011-01-05 18:49:00\",\"2011-01-05 19:34:52\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\"],\"ended\":[\"2011-01-04 19:41:36\",\"2011-01-04 19:43:16\",\"2011-01-04 19:44:30\",\"2011-01-04 19:46:28\",\"2011-01-04 19:56:57\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:37\",\"2011-01-04 20:02:58\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:06\",\"2011-01-04 20:58:29\",\"2011-01-04 21:08:32\",\"2011-01-04 21:09:10\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:24:17\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:27:46\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:29:18\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-04 21:31:02\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:26:21\",\"2011-01-05 17:38:17\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:47:09\",\"2011-01-05 18:49:00\",\"2011-01-05 19:33:50\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\",\"2011-01-09 19:47:22\",null]}"), stringsAsFactors=F)

survey_unit_sessions = as.data.frame(jsonlite::fromJSON("{\"session\":[\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\"],\"id\":[1420,1422,1423,1427,1428,1432,1433,1434,1435,1436,1437,1439,1440,1442,1443,1445,1446,1465,1466,1468,1469,1470,1479,1480,1481,1483,1484,1485,1486,1494,1495,1496,1497,1539,1540,1541,1542,1543,1544,1545,1547,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1591,1592,1596,1597,1598,1599,1600,1601,1602,1603,1604,1766,1916,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932],\"unit_id\":[224,224,225,224,225,224,225,225,221,222,223,224,225,222,223,224,225,221,222,224,221,222,221,222,223,224,221,222,223,224,221,222,223,225,225,225,224,221,222,223,224,224,221,222,224,221,222,221,222,221,222,221,222,221,221,224,220,224,221,222,227,229,228,227,229,228,227,229,221,222,223,219,224,221,222,223,219,224,220,220,226],\"run_session_id\":[472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472],\"created\":[\"2011-01-04 19:40:45\",\"2011-01-04 19:43:16\",\"2011-01-04 19:43:17\",\"2011-01-04 19:46:26\",\"2011-01-04 19:46:28\",\"2011-01-04 19:59:45\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:26\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:51\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:05\",\"2011-01-04 20:04:06\",\"2011-01-04 21:08:32\",\"2011-01-04 21:08:32\",\"2011-01-04 21:11:11\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:29:13\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:30:56\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-05 14:00:17\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:31:26\",\"2011-01-05 18:16:15\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:48:57\",\"2011-01-05 18:49:00\",\"2011-01-05 19:34:52\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\"],\"ended\":[\"2011-01-04 19:41:36\",\"2011-01-04 19:43:16\",\"2011-01-04 19:44:30\",\"2011-01-04 19:46:28\",\"2011-01-04 19:56:57\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:37\",\"2011-01-04 20:02:58\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:06\",\"2011-01-04 20:58:29\",\"2011-01-04 21:08:32\",\"2011-01-04 21:09:10\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:24:17\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:27:46\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:29:18\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-04 21:31:02\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:26:21\",\"2011-01-05 17:38:17\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:47:09\",\"2011-01-05 18:49:00\",\"2011-01-05 19:33:50\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\",\"2011-01-09 19:47:22\",null]}"), stringsAsFactors=F)

survey_unit_sessions = as.data.frame(jsonlite::fromJSON("{\"session\":[\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\"],\"id\":[1420,1422,1423,1427,1428,1432,1433,1434,1435,1436,1437,1439,1440,1442,1443,1445,1446,1465,1466,1468,1469,1470,1479,1480,1481,1483,1484,1485,1486,1494,1495,1496,1497,1539,1540,1541,1542,1543,1544,1545,1547,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1591,1592,1596,1597,1598,1599,1600,1601,1602,1603,1604,1766,1916,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932],\"unit_id\":[224,224,225,224,225,224,225,225,221,222,223,224,225,222,223,224,225,221,222,224,221,222,221,222,223,224,221,222,223,224,221,222,223,225,225,225,224,221,222,223,224,224,221,222,224,221,222,221,222,221,222,221,222,221,221,224,220,224,221,222,227,229,228,227,229,228,227,229,221,222,223,219,224,221,222,223,219,224,220,220,226],\"run_session_id\":[472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472],\"created\":[\"2011-01-04 19:40:45\",\"2011-01-04 19:43:16\",\"2011-01-04 19:43:17\",\"2011-01-04 19:46:26\",\"2011-01-04 19:46:28\",\"2011-01-04 19:59:45\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:26\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:51\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:05\",\"2011-01-04 20:04:06\",\"2011-01-04 21:08:32\",\"2011-01-04 21:08:32\",\"2011-01-04 21:11:11\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:29:13\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:30:56\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-05 14:00:17\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:31:26\",\"2011-01-05 18:16:15\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:48:57\",\"2011-01-05 18:49:00\",\"2011-01-05 19:34:52\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\"],\"ended\":[\"2011-01-04 19:41:36\",\"2011-01-04 19:43:16\",\"2011-01-04 19:44:30\",\"2011-01-04 19:46:28\",\"2011-01-04 19:56:57\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:37\",\"2011-01-04 20:02:58\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:06\",\"2011-01-04 20:58:29\",\"2011-01-04 21:08:32\",\"2011-01-04 21:09:10\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:24:17\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:27:46\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:29:18\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-04 21:31:02\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:26:21\",\"2011-01-05 17:38:17\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:47:09\",\"2011-01-05 18:49:00\",\"2011-01-05 19:33:50\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\",\"2011-01-09 19:47:22\",null]}"), stringsAsFactors=F)

survey_unit_sessions = as.data.frame(jsonlite::fromJSON("{\"session\":[\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\"],\"id\":[1420,1422,1423,1427,1428,1432,1433,1434,1435,1436,1437,1439,1440,1442,1443,1445,1446,1465,1466,1468,1469,1470,1479,1480,1481,1483,1484,1485,1486,1494,1495,1496,1497,1539,1540,1541,1542,1543,1544,1545,1547,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1591,1592,1596,1597,1598,1599,1600,1601,1602,1603,1604,1766,1916,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932],\"unit_id\":[224,224,225,224,225,224,225,225,221,222,223,224,225,222,223,224,225,221,222,224,221,222,221,222,223,224,221,222,223,224,221,222,223,225,225,225,224,221,222,223,224,224,221,222,224,221,222,221,222,221,222,221,222,221,221,224,220,224,221,222,227,229,228,227,229,228,227,229,221,222,223,219,224,221,222,223,219,224,220,220,226],\"run_session_id\":[472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472],\"created\":[\"2011-01-04 19:40:45\",\"2011-01-04 19:43:16\",\"2011-01-04 19:43:17\",\"2011-01-04 19:46:26\",\"2011-01-04 19:46:28\",\"2011-01-04 19:59:45\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:26\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:51\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:05\",\"2011-01-04 20:04:06\",\"2011-01-04 21:08:32\",\"2011-01-04 21:08:32\",\"2011-01-04 21:11:11\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:29:13\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:30:56\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-05 14:00:17\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:31:26\",\"2011-01-05 18:16:15\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:48:57\",\"2011-01-05 18:49:00\",\"2011-01-05 19:34:52\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\"],\"ended\":[\"2011-01-04 19:41:36\",\"2011-01-04 19:43:16\",\"2011-01-04 19:44:30\",\"2011-01-04 19:46:28\",\"2011-01-04 19:56:57\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:37\",\"2011-01-04 20:02:58\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:06\",\"2011-01-04 20:58:29\",\"2011-01-04 21:08:32\",\"2011-01-04 21:09:10\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:24:17\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:27:46\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:29:18\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-04 21:31:02\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:26:21\",\"2011-01-05 17:38:17\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:47:09\",\"2011-01-05 18:49:00\",\"2011-01-05 19:33:50\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\",\"2011-01-09 19:47:22\",null]}"), stringsAsFactors=F)


survey_unit_sessions = as.data.frame(jsonlite::fromJSON("{\"session\":[\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\"],\"id\":[1420,1422,1423,1427,1428,1432,1433,1434,1435,1436,1437,1439,1440,1442,1443,1445,1446,1465,1466,1468,1469,1470,1479,1480,1481,1483,1484,1485,1486,1494,1495,1496,1497,1539,1540,1541,1542,1543,1544,1545,1547,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1591,1592,1596,1597,1598,1599,1600,1601,1602,1603,1604,1766,1916,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932],\"unit_id\":[224,224,225,224,225,224,225,225,221,222,223,224,225,222,223,224,225,221,222,224,221,222,221,222,223,224,221,222,223,224,221,222,223,225,225,225,224,221,222,223,224,224,221,222,224,221,222,221,222,221,222,221,222,221,221,224,220,224,221,222,227,229,228,227,229,228,227,229,221,222,223,219,224,221,222,223,219,224,220,220,226],\"run_session_id\":[472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472,472],\"created\":[\"2011-01-04 19:40:45\",\"2011-01-04 19:43:16\",\"2011-01-04 19:43:17\",\"2011-01-04 19:46:26\",\"2011-01-04 19:46:28\",\"2011-01-04 19:59:45\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:26\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:51\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:05\",\"2011-01-04 20:04:06\",\"2011-01-04 21:08:32\",\"2011-01-04 21:08:32\",\"2011-01-04 21:11:11\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:29:13\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:30:56\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-05 14:00:17\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:31:26\",\"2011-01-05 18:16:15\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:48:57\",\"2011-01-05 18:49:00\",\"2011-01-05 19:34:52\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\"],\"ended\":[\"2011-01-04 19:41:36\",\"2011-01-04 19:43:16\",\"2011-01-04 19:44:30\",\"2011-01-04 19:46:28\",\"2011-01-04 19:56:57\",\"2011-01-04 19:59:45\",\"2011-01-04 20:00:34\",\"2011-01-04 20:00:45\",\"2011-01-04 20:00:48\",\"2011-01-04 20:00:53\",\"2011-01-04 20:00:53\",\"2011-01-04 20:02:27\",\"2011-01-04 20:02:37\",\"2011-01-04 20:02:58\",\"2011-01-04 20:02:58\",\"2011-01-04 20:04:06\",\"2011-01-04 20:58:29\",\"2011-01-04 21:08:32\",\"2011-01-04 21:09:10\",\"2011-01-04 21:11:12\",\"2011-01-04 21:11:12\",\"2011-01-04 21:24:17\",\"2011-01-04 21:27:41\",\"2011-01-04 21:27:45\",\"2011-01-04 21:27:46\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:14\",\"2011-01-04 21:29:17\",\"2011-01-04 21:29:18\",\"2011-01-04 21:30:57\",\"2011-01-04 21:30:57\",\"2011-01-04 21:31:01\",\"2011-01-04 21:31:02\",\"2011-01-05 14:00:35\",\"2011-01-05 14:02:00\",\"2011-01-05 14:25:11\",\"2011-01-05 14:25:15\",\"2011-01-05 14:26:12\",\"2011-01-05 14:26:21\",\"2011-01-05 14:26:21\",\"2011-01-05 17:38:17\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:16\",\"2011-01-05 18:16:53\",\"2011-01-05 18:16:56\",\"2011-01-05 18:16:56\",\"2011-01-05 18:17:00\",\"2011-01-05 18:17:02\",\"2011-01-05 18:10:57\",\"2011-01-05 18:21:02\",\"2011-01-05 18:21:39\",\"2011-01-05 18:23:09\",\"2011-01-05 18:23:19\",\"2011-01-05 18:37:00\",\"2011-01-05 18:47:09\",\"2011-01-05 18:49:00\",\"2011-01-05 19:33:50\",\"2011-01-05 19:34:54\",\"2011-01-05 19:34:54\",\"2011-01-05 19:35:23\",\"2011-01-05 19:35:36\",\"2011-01-05 19:35:36\",\"2011-01-05 19:37:34\",\"2011-01-05 19:37:47\",\"2011-01-05 19:37:47\",\"2011-01-08 10:01:38\",\"2011-01-09 19:34:11\",\"2011-01-09 19:34:11\",\"2011-01-09 19:40:35\",\"2011-01-09 19:40:38\",\"2011-01-09 19:40:39\",\"2011-01-09 19:44:08\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:09\",\"2011-01-09 19:44:12\",\"2011-01-09 19:44:13\",\"2011-01-09 19:45:33\",\"2011-01-09 19:45:34\",\"2011-01-09 19:47:36\",\"2011-01-09 19:47:22\",null]}"), stringsAsFactors=F)


Taeglicher_Fragebogen_1 = as.data.frame(jsonlite::fromJSON("{\"session\":[\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\"],\"session_id\":[1923,1928],\"study_id\":[219,219],\"modified\":[\"2011-01-09 19:44:08\",\"2011-01-09 19:45:33\"],\"created\":[\"2011-01-09 19:40:39\",\"2011-01-09 19:44:13\"],\"ended\":[\"2011-01-09 19:44:08\",\"2011-01-09 19:45:33\"]}"), stringsAsFactors=F);

library(lubridate); 
nrow(Taeglicher_Fragebogen_1) < 20 || 
( as.Date(head(Taeglicher_Fragebogen_1$created, 1)) + days(35) ) < today();
# wenn der taegliche fragebogen seltener als 20 mal und ueber einen kuerzeren zeitraum als 35 tage ausgefuellt wurde, muss er weiter ausgefuellt werden.
})() }';
$before = microtime(true);
$results = $openCPU->identity(array('x' => $source), '', true);

$alert_type = 'alert-success';
if ($openCPU->http_status > 302 OR $openCPU->http_status === 0) {
    $alert_type = 'alert-danger';
}

alert("3. HTTP status: " . $openCPU->http_status, $alert_type);
$accordion3 = $openCPU->debugCall($results);
alert("3. Request took " . round((microtime(true) - $before) / 60, 4) . " minutes and was " . human_filesize(strlen($source)), 'alert-info');


// ===============================================

$openCPU = new OpenCPU(Config::get('alternative_opencpu_instance'));
$source = '{ 
(function() {
# ' . $nocache . '
Taeglicher_Fragebogen_1 = as.data.frame(jsonlite::fromJSON("{\"session\":[\"2uy43834873467gejdsgdfujgcv8\",\"2uy43834873467gejdsgdfujgcv8\"],\"session_id\":[1923,1928],\"study_id\":[219,219],\"modified\":[\"2011-01-09 19:44:08\",\"2011-01-09 19:45:33\"],\"created\":[\"2011-01-09 19:40:39\",\"2011-01-09 19:44:13\"],\"ended\":[\"2011-01-09 19:44:08\",\"2011-01-09 19:45:33\"]}"), stringsAsFactors=F);

library(lubridate);
nrow(Taeglicher_Fragebogen_1) < 20 || 
( as.Date(head(Taeglicher_Fragebogen_1$created, 1)) + days(35) ) < today()
})() }';
$before = microtime(true);
$results = $openCPU->identity(array('x' => $source), '', true);

$alert_type = 'alert-success';
if ($openCPU->http_status > 302 OR $openCPU->http_status === 0) {
    $alert_type = 'alert-danger';
}

alert("4. HTTP status: " . $openCPU->http_status, $alert_type);
$accordion4 = $openCPU->debugCall($results);
alert("4. Request took " . round((microtime(true) - $before) / 60, 4) . " minutes", 'alert-info');

// ===== RESULTS ===== //

$alerts = $site->renderAlerts();
if (!empty($alerts)):
    echo '<div class="row"><div class="col-md-8 all-alerts">';
    echo $alerts;
    echo '</div></div>';
endif;

echo "<h4>test knitr with plot</h4>";

echo $accordion;

echo "<h4>test simple function</h4>";

echo $accordion2;

echo "<h4>test long call</h4>";

echo $accordion3;

echo "<h4>test long call without final comment</h4>";

echo $accordion4;

Template::load('footer');
